<%= csrf_meta_tag %>
<%= javascript_tag "var AUTH_TOKEN = '#{form_authenticity_token}';" if protect_against_forgery? %>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&amp;times;</button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        <h3><%= text_field_tag 'Group Name', nil, :id =>'group_name' %></h3>
      </div>
      <div class="modal-footer">
        <%= link_to 'Create', 'groups', :class => "btn btn-default", id: 'create' %><br />
        <%= check_box_tag 'group', 'join', false, :class => "btn btn-primary", :name => "group_join" -%>
        <%= 'Join group' %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
$(function () {
  $("#create").click(function () {
    var is_checked = $('input:checked').length;
    var text = $("#group_name").val();
    $.post("/groups/ajax_create",{
      checked: is_checked,
      group_name: text,
      authenticity_token: AUTH_TOKEN
    })
    return false; // stop the browser following the link
  });
});
</script>
