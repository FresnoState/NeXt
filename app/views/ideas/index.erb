<% if context.user %>
<%= button_to 'Propose Idea',
              new_idea_url,
              method: 'get',
              class: 'btn btn-warning btn-block',
              form_class: 'button_to pull-right' %>
<% end %>

<h2>Ideas</h2>

<%= will_paginate @ideas %>

<div class="list-group">
<% @ideas.each do |idea| %>
  <a class="list-group-item" href="<%= idea_url(idea) %>">
    <div class="row">
      <div class="col-sm-10">
        <h4><%= idea.name %></h4>
        <%= raw idea.pitch %>
        <p><small>
          Proposed
          <% if idea.idea_roles.founders.count > 0 %>
          by <%= idea.idea_roles.founders.includes(:user).map(){ |r| r.user.display_name }.to_sentence %>
          <% end %>
          on <%= idea.created_at.strftime("%B %d, %Y") %>
        </small></p>
      </div>
      <nav class="col-sm-2">
        <div class="visible-md-block visible-lg-block text-right">
          <% unless idea.has_been_voted_for_by? context.user %>
          <%= button_to '+1', '#', class: 'btn btn-success', method: 'get' %>
          <% end %>
          <%= button_to '...', idea_url(idea), class: 'btn btn-info', method: 'get' %>
        </div>
        <div class="hidden-md hidden-lg">
          <% unless idea.has_been_voted_for_by? context.user %>
            <%= button_to '+1', '#', class: 'btn btn-success', method: 'get' %>
          <% end %>
          <%= button_to '...', idea_url(idea), class: 'btn btn-info', method: 'get' %>
        </div>
      </nav>
    </div>
  </a>
<% end %>
</div>

<%= will_paginate @ideas %>